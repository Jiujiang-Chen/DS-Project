# used to create the object
name: smg_gaiting

physics_engine: ${..physics_engine}

# if given, will override the device setting in gym.
env:
  # numEnvs: 4
  # numEnvs: 1024
  numEnvs: 4096
  # numEnvs: 8192
  # numEnvs: 16384

  envSpacing: 0.5
  enableDebugVis: True

  # env settings
  objName: 'sphere'
  # objName: 'cube'
  # objName: 'icosahedron'
  rotateIncrementDegrees: 30

  # action settings
  useRelativeControl: True
  dofSpeedScale: 10.0
  actionsMovingAverage: 1.0
  controlFrequencyInv: 2

  # shared reward/termination
  episodeLength: 1000
  requireContact: True
  contactRewardScale: 0.0
  actionPenaltyScale: 0.0
  avFactor: 0.01
  reachGoalBonus: 250
  fallResetDist: 0.15
  fallPenalty: 0.0

  # rewardType: "hybrid"
  distRewardScale: -10.0
  rotRewardScale: 1.0
  rotSuccessTolerance: 0.1
  rotEps: 0.1

  rewardType: "keypoint"
  kpSuccessTolerance: 0.02
  lgskScale: 50.0
  lgskEps: 2.0
  kpDistScale: 10.0

task:
  randomize: True
  randHandJoints: True
  randObjInitOrn: True
  randPivotPos: False
  randPivotAxel: False

asymmetricObs: True
enabledObs:
    jointPos: True
    jointVel: True
    fingertipPos: True
    fingertipOrn: True
    lastAction: True
    boolTipContacts: True
    tipContactForces: True
    objectPos: False
    objectOrn: False
    objectKPs: False
    objectLinVel: False
    objectAngVel: False
    GoalPos: False
    GoalOrn: False
    GoalKPs: False
    activeQuat: False
    pivotAxelVec: True
    pivotAxelPos: True

enabledStates:
    jointPos: True
    jointVel: True
    fingertipPos: True
    fingertipOrn: True
    lastAction: True
    boolTipContacts: True
    tipContactForces: True
    objectPos: True
    objectOrn: True
    objectKPs: True
    objectLinVel: True
    objectAngVel: True
    GoalPos: True
    GoalOrn: True
    GoalKPs: True
    activeQuat: True
    pivotAxelVec: True
    pivotAxelPos: True

sim:
  dt: 0.02
  substeps: 4
  up_axis: "z"
  use_gpu_pipeline: ${eq:${...pipeline},"gpu"}
  gravity: [0.0, 0.0, -9.81]
  physx:
    num_threads: ${....num_threads}
    solver_type: ${....solver_type}
    use_gpu: ${contains:"cuda",${....sim_device}}
    num_position_iterations: 8
    num_velocity_iterations: 0
    max_gpu_contact_pairs: 8388608
    contact_offset: 0.002
    rest_offset: 0.0
    bounce_threshold_velocity: 0.2
    max_depenetration_velocity: 1000.0
    default_buffer_size_multiplier: 5.0
    contact_collection: 2
